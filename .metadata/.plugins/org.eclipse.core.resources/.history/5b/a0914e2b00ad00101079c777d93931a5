package test_persistencia;

import static org.junit.Assert.*;


import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;

import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import excepciones.PasswordErroneaException;
import excepciones.UsuarioNoExisteException;
import excepciones.UsuarioYaExisteException;
import modeloDatos.Administrador;
import modeloDatos.Auto;
import modeloDatos.Chofer;
import modeloDatos.ChoferPermanente;
import modeloDatos.ChoferTemporario;
import modeloDatos.Cliente;
import modeloDatos.Combi;
import modeloDatos.Moto;
import modeloDatos.Pedido;
import modeloDatos.Usuario;
import modeloDatos.Vehiculo;
import modeloDatos.Viaje;
import modeloNegocio.Empresa;
import util.Constantes;


import persistencia.EmpresaDTO;

public class Test_EmpresaDTO {
	
	EmpresaDTO empresa;
	
	@Before
	public void setUp() throws Exception {
		empresa = new EmpresaDTO();
	}

	@Test
	public void test_get_set_choferes() {
		String dniChoferTemp1 = "1122233";
		ChoferTemporario choferTemp1 = new ChoferTemporario(dniChoferTemp1, "Jose Perez");
		
		String dniChoferTemp2 = "4422233";
		ChoferTemporario choferTemp2 = new ChoferTemporario(dniChoferTemp1, "Perez Jose");
		
		String dniChoferPerm1 = "12333444";
		ChoferPermanente choferPer1 = new ChoferPermanente(dniChoferPerm1, "Armando Paredez", 2000, 1);
		
		String dniChoferPerm2 = "12311244";
		ChoferPermanente choferPer2 = new ChoferPermanente(dniChoferPerm1, "Pablito Clavito", 2000, 1);
		
		
		HashMap<String, Chofer> mapaChofer = new HashMap<>();
		
		mapaChofer.put(dniChoferTemp1, choferTemp1);
		mapaChofer.put(dniChoferTemp2, choferTemp2);
		
		mapaChofer.put(dniChoferPerm1, choferPer1);
		mapaChofer.put(dniChoferPerm2, choferPer2);
		
		empresa.setChoferes(mapaChofer);
		
		HashMap<String, Chofer> mapaEmpresa = empresa.getChoferes();
		
		assertEquals(mapaChofer, mapaEmpresa);
		
	}
	
	
	@Test
	public void test_get_set_choferesDesocupados() {

		ChoferTemporario choferTemp1 = new ChoferTemporario("1122233", "Jose Perez");
		ChoferTemporario choferTemp2 = new ChoferTemporario("4422233", "Perez Jose");
		ChoferPermanente choferPer1 = new ChoferPermanente("12333444", "Armando Paredez", 2000, 1);
		ChoferPermanente choferPer2 = new ChoferPermanente("12311244", "Pablito Clavito", 2000, 1);
		
		ArrayList<Chofer> choferesDesocupados = new ArrayList<>();
		choferesDesocupados.add(choferTemp1);
		choferesDesocupados.add(choferTemp2);
		choferesDesocupados.add(choferPer1);
		choferesDesocupados.add(choferPer2);
		
		empresa.setChoferesDesocupados(choferesDesocupados);
		
		ArrayList<Chofer> choferesDesocupadosEmpresa = empresa.getChoferesDesocupados();
		
		assertEquals(choferesDesocupados, choferesDesocupadosEmpresa);
		
	}
	
	
	@Test
	public void test_get_set_clientes() {
		
		String nombreUsCliente1 = "nombreUsuario1";
		String nombreUsCliente2 = "nombreUsuario2";
		String nombreUsCliente3 = "nombreUsuario3";
		
		Cliente cliente1 = new Cliente(nombreUsCliente1, "pass1", "nombreReal1");
		Cliente clienteRepetido = new Cliente(nombreUsCliente1, "pass1", "nombreReal1");
		Cliente cliente2 = new Cliente(nombreUsCliente2, "pass2", "nombreReal2");
		Cliente cliente3 = new Cliente(nombreUsCliente3, "pass3", "nombreReal3");
		
		HashMap<String, Cliente> mapaCliente = new HashMap<>();
		mapaCliente.put(nombreUsCliente1, cliente1);
		mapaCliente.put(nombreUsCliente1, clienteRepetido);
		mapaCliente.put(nombreUsCliente1, cliente2);
		mapaCliente.put(nombreUsCliente1, cliente3);
		
		empresa.setClientes(mapaCliente);

		HashMap<String, Cliente> mapaClienteEmpresa = empresa.getClientes();
		
		assertEquals(mapaCliente, mapaClienteEmpresa);
		
	}
	
	@Test
	public void test_get_set_getPedidos() {
		
		Cliente cliente1 = new Cliente("nombreUsuario1", "pass1", "nombreReal1");
		Cliente cliente2 = new Cliente("nombreUsuario2", "pass2", "nombreReal2");

		Pedido pedido1 = new Pedido(cliente1, 7, true, false, 10, Constantes.ZONA_PELIGROSA);
		Pedido pedido2 = new Pedido(cliente2, 9, false, true, 321, Constantes.ZONA_STANDARD);
		
		HashMap<Cliente, Pedido> mapaPedido = new HashMap<>();
		
		mapaPedido.put(cliente1, pedido1);
		mapaPedido.put(cliente2, pedido2);
		
		empresa.setPedidos(mapaPedido);
		
		HashMap<Cliente, Pedido> mapaPedidoEmpresa = empresa.getPedidos(); 
		
		assertEquals(mapaPedido, mapaPedidoEmpresa);
	
	}
	
	@Test
	public void test_get_set_usuarioLogeado() {
		Usuario cliente = new Cliente("nombreUsuario1", "pass1", "nombreReal1");
		
		empresa.setUsuarioLogeado(cliente);
		Usuario usuarioLogeado = empresa.getUsuarioLogeado();
		
		assertEquals(cliente, usuarioLogeado);
		
		Usuario admin = Administrador.getInstance();	
		
		empresa.setUsuarioLogeado(admin);
		usuarioLogeado = empresa.getUsuarioLogeado();
		
		assertEquals(admin, usuarioLogeado);

	}
	
	@Test
	public void test_get_set_vehiculos() {
		
		String patenteMoto = "MM123MM";
		String patenteAuto= "AA123AA";
		String patenteCombi = "CC123CC";
		
		Vehiculo moto = new Moto(patenteMoto);
		Vehiculo auto = new Auto(patenteAuto, 3, true);
		Vehiculo combi = new Combi(patenteCombi, 8, false);
		
		HashMap<String, Vehiculo> mapaVehiculo = new HashMap<>();
		
		mapaVehiculo.put(patenteMoto, moto);
		mapaVehiculo.put(patenteAuto, auto);
		mapaVehiculo.put(patenteCombi, combi);
			
		empresa.setVehiculos(mapaVehiculo);
		
		HashMap<String, Vehiculo> mapaVehiculoEmpresa = empresa.getVehiculos();
		
		assertEquals(mapaVehiculo, mapaVehiculoEmpresa);
		
	}
	
	@Test
	public void test_get_set_vehiculosDesocupados() {
		
		Vehiculo moto = new Moto("MM123MM");
		Vehiculo auto = new Auto("AA123AA", 3, true);
		Vehiculo combi = new Combi("CC123CC", 8, false);
		
		ArrayList<Vehiculo> vehiculosDesocupados = new ArrayList<>();
		vehiculosDesocupados.add(moto);
		vehiculosDesocupados.add(auto);
		vehiculosDesocupados.add(combi);
		
		empresa.setVehiculosDesocupados(vehiculosDesocupados);
		
		ArrayList<Vehiculo> vehiculosDesocupadosEmpresa = empresa.getVehiculosDesocupados();

		assertEquals(vehiculosDesocupados, vehiculosDesocupadosEmpresa);
	}
	
	@Test
	void test_get_set_viajesIniciados() {
		
		Chofer choferViaje1 = new ChoferTemporario("1122233", "Jose Carlos Paz");
		Cliente clienteViaje1 = new Cliente("nombreUsuario1", "pass1", "nombreReal1");
		Pedido pedidoViaje1 = new Pedido(clienteViaje1, 9, false, true, 23, Constantes.ZONA_STANDARD);
		Vehiculo vehiculoViaje1 = new Auto("AA123AA", 4, false);
		
		
		Chofer choferViaje2 = new ChoferTemporario("2244999", "Fernando Jose Alcachofa");
		Cliente clienteViaje2 = new Cliente("nombreUsuario2", "pass2", "nombreReal2");
		Pedido pedidoViaje2 = new Pedido(clienteViaje1, 9, true, false, 92, Constantes.ZONA_SIN_ASFALTAR);
		Vehiculo vehiculoViaje2 = new Combi("CC123C", 9, true);
		
		Viaje viaje1 = new Viaje(pedidoViaje1, choferViaje1, vehiculoViaje1);
		Viaje viaje2 = new Viaje(pedidoViaje2, choferViaje2, vehiculoViaje2);
		
		
		HashMap<Cliente, Viaje> mapaViaje = new HashMap<>();
		mapaViaje.put(clienteViaje1, viaje1);
		mapaViaje.put(clienteViaje2, viaje2);
		
		empresa.setViajesIniciados(mapaViaje);
		
		HashMap<Cliente, Viaje> mapaViajeEmpresa = empresa.getViajesIniciados();
		
		assertEquals(mapaViaje, mapaViajeEmpresa);
		
	}
	
	@Test
	void test_get_set_viajesTerminados() {
		
		Chofer choferViaje1 = new ChoferTemporario("1122233", "Jose Carlos Paz");
		Cliente clienteViaje1 = new Cliente("nombreUsuario1", "pass1", "nombreReal1");
		Pedido pedidoViaje1 = new Pedido(clienteViaje1, 9, false, true, 23, Constantes.ZONA_STANDARD);
		Vehiculo vehiculoViaje1 = new Auto("AA123AA", 4, false);
		
		
		Chofer choferViaje2 = new ChoferTemporario("2244999", "Fernando Jose Alcachofa");
		Cliente clienteViaje2 = new Cliente("nombreUsuario2", "pass2", "nombreReal2");
		Pedido pedidoViaje2 = new Pedido(clienteViaje1, 9, true, false, 92, Constantes.ZONA_SIN_ASFALTAR);
		Vehiculo vehiculoViaje2 = new Combi("CC123C", 9, true);
		
		Viaje viaje1 = new Viaje(pedidoViaje1, choferViaje1, vehiculoViaje1);
		Viaje viaje2 = new Viaje(pedidoViaje2, choferViaje2, vehiculoViaje2);
		
		
		ArrayList<Viaje> viajesTerminados = new ArrayList<>();
		viajesTerminados.add(viaje1);
		viajesTerminados.add(viaje2);
		
		empresa.setViajesTerminados(viajesTerminados);
		
		ArrayList<Viaje> viajesTerminadosEmpresa = empresa.getViajesTerminados();
		
		assertEquals(viajesTerminados, viajesTerminadosEmpresa);
		
	}
	
	
	

}



















